# [FRONTEND] [STORY] Integration: Inbound Event Handler for Workorder-Originated Updates
## Purpose
Provide a CRM UI for users with permission to view inbound event processing activity and related suspense items generated by workorder-originated updates. Enable safe, paginated browsing with filtering and sorting based only on backend-exposed DTO fields. Ensure sensitive payload content is never displayed (server-redacted) while still giving enough metadata and summaries to troubleshoot and navigate to detail views.

## Components
- Page header: “Inbound Event Handler” (or existing integration page title) with breadcrumb/back
- Tab navigation: “Processing Logs” tab, “Suspense” tab
- Processing Logs filter bar
  - Text input: Correlation (exact match)
  - Text input: Correlation “starts with” (prefix match; label “starts with”)
  - Optional text inputs: event type / status (backend-supported)
  - Optional UUID inputs: workorderId / related IDs (as supported)
  - Date range picker: receivedAt from/to (ISO datetime)
  - Buttons: Apply/Update, Clear filters
- Processing Logs table (paginated)
  - Columns (as available): receivedAt, completedAt, status, eventType, correlation, ids (safe), summary/notes (safe)
  - Sort controls (backend-supported fields only); default sort by receivedAt (or canonical timestamp)
  - Pagination controls (server-side): page size 25 default, page index, total count
- Processing Log detail panel/page
  - Envelope metadata section (safe DTO fields)
  - Processing outcome section (status, timestamps)
  - Retry metadata section (conditional): retryCount, nextRetryAt, lastRetryAt (render only if present)
  - Redacted payload indicator (no raw payload)
- Suspense list table (paginated)
  - Columns (as available): createdAt, updatedAt, suspenseStatus, safe summary, ids (suspenseId, related UUIDs), type/source
  - Sort controls (backend-supported); default sort per backend guidance
  - Pagination controls (server-side)
- Suspense detail panel/page
  - Header with suspenseId
  - Envelope metadata section
  - Failure summary section (safe summary)
  - Optional payload fields section (conditional; only safe/redacted fields if provided)
- Inline validation messages for filter inputs (client-detected)
- Error banner/toast for backend validation/errors (from backend error response)
- Loading states: table skeleton/spinner; detail loading indicator; empty state messaging

## Layout
- Top: Page header + tabs
- Main (tab content):
  - [Filter Bar (top)] → [Results Table (middle)] → [Pagination (bottom)]
- Detail navigation: clicking a row opens a dedicated detail view or right-side detail panel (consistent with existing CRM patterns)

## Interaction Flow
1. Navigate to the Integration area and open the “Processing Logs” tab.
2. System loads Processing Logs list using server-side paging (default page size 25) and default sort (receivedAt or canonical timestamp).
3. User enters filters (correlation exact, correlation starts-with, optional IDs, date range) and selects Apply; list refreshes to match filters.
4. User changes sort using only supported backend sort fields; list refreshes with new sort.
5. User paginates (next/prev or page number); list refreshes using page + size query params.
6. User clicks a Processing Log row to open detail; system loads detail by the record identifier and displays safe envelope metadata, timestamps, status, and any safe summary fields.
7. Edge case: Retry metadata present for a record → show retryCount/nextRetryAt/lastRetryAt section; if absent → omit the section entirely (no placeholders, no errors).
8. Navigate to the “Suspense” tab; system loads Suspense list with server-side paging and default sort.
9. User opens a Suspense item; system loads detail by suspenseId and displays envelope metadata and failure summary.
10. Edge case: Optional payload fields exist (safe/redacted) → render them; if not present → do not render the payload section.
11. Error handling: invalid filters show inline validation when detectable client-side; otherwise display a banner using backend error response and keep prior results visible if possible.

## Notes
- Backend dependency: UI must use dedicated read services for Processing Logs and Suspense (no direct entity-find from screens).
- Security: Any sensitive content must be redacted server-side; UI must not display raw payloads. If a “payload” or similar field is present, treat it as redacted/unsafe by default and show only safe indicators/summary.
- Sorting: Default sort is Processing Logs by receivedAt (or backend canonical timestamp). Users may change sort only to fields explicitly supported by backend DTO; UI must not assume arbitrary sort keys.
- Pagination: Server-side paging required; default page size 25 (SD-UX-PAGINATION). Backend may cap page size; UI should handle capped sizes gracefully.
- Data requirements (DTO-driven): Render only fields provided by backend safe DTOs; all optional fields must be null-safe and conditionally rendered.
- Validation/errors: For invalid filters, prefer inline validation when possible; otherwise show a non-blocking error banner sourced from backend error responses.
- Risk/requirements gaps: Several field names are implied but not fully specified; implement with a DTO-to-UI mapping layer so columns/labels can be adjusted without refactoring core components.
